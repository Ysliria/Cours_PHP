<!DOCTYPE html>

<html lang="fr" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
          integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="../../styles/prism.css">
    <title>PHP - Fonctions - Fonctions internes</title>
</head>

<body>
<main class="container">
    <h1 class="display-1">Les fonctions internes</h1>

    <hr>

    <section class="mt-5">
        <h2 class="text-muted">Généralité</h2>

        <p class="mt-3">
            Si PHP nous permmet de définir nos propres fonctions, il dispose aussi de fonctions internes.
            En effet, il serait dommage de devoir développer des fonctions récurrentes à chaque nouveau projet.
        </p>

        <p class="mt-3">
            Parmi ces fonctions, il y en a qu'on utilise depuis le début du cours :
        </p>

        <ul>
            <li><kbd>echo</kbd> qui peut aussi s'écrire <kbd>echo(...$string)</kbd></li>
            <li><kbd>var_dump($variable)</kbd></li>
            <li><kbd>die</kbd> qu'on peut aussi écrire <kbd>die($status)</kbd></li>
        </ul>

        <p class="mt-3">
            Et il en existe plein d'autre comme <kbd>php_info()</kbd> qui vous donnera les informations sur la
            configuration de PHP.
            On ne peut pas toutes les lister ; aussi, je vous conseille de chercher et de lire attentivement la
            documentation des fonctions que vous utiliserez au gré de vos besoins.
        </p>
    </section>

    <!-- https://www.php.net/manual/fr/funcref.php -->

    <hr>

    <section class="mt-5">
        <h2 class="text-muted">Les fonctions pour les chaînes de caractères</h2>

        <p class="mt-3">
            La manipulation de chaînes de caractères fait partie des choses que l'on peut être ammené à faire
            régulièrement.
            Aussi, PHP regorge de fonctions spécifiques dédiées à la manipulation de celles-ci.
        </p>

        <p class="mt-3">
            Vous trouverez dans la documentation de PHP la liste de ses fonctions : <a
                href="https://www.php.net/manual/fr/ref.strings.php" target="_blank">Fonctions sur les chaînes de
            caractères</a>.
            En voici une liste, non exhaustive, des plus couramment utilisées :
        </p>

        <ul>
            <li><strong><a href="https://www.php.net/manual/fr/function.html-entity-decode.php" target="_blank">html_entity_decode</a></strong> : convertit les entités HTML à leurs caractères correspondant</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.htmlentities.php" target="_blank">htmlentities</a></strong> : convertit tous les caractères éligibles en entités HTML</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.htmlspecialchars-decode.php" target="_blank">htmlspecialchars_decode</a></strong> : convertit les entités HTML spéciales en caractères</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.htmlspecialchars.php" target="_blank">htmlspecialchars</a></strong> : convertit les caractères spéciaux en entités HTML</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.ucfirst.php" target="_blank">ucfirst</a></strong> : met le premier caractère en majuscule</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.nl2br.php" target="_blank">nl2br</a></strong> : insère un retour à la ligne HTML à chaque nouvelle ligne</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.number-format.php" target="_blank">number_format</a></strong> : formate un nombre pour l'affichage</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.str-replace.php" target="_blank">str_replace</a></strong> : remplace toutes les occurrences dans une chaîne</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.strlen.php" target="_blank">strlen</a></strong> : calcule la taille d'une chaîne</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.strpos.php" target="_blank">strpos</a></strong> : cherche la position de la première occurrence dans une chaîne</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.strtolower.php" target="_blank">strtolower</a></strong> : renvoie une chaîne en minuscules</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.strtoupper.php" target="_blank">strtoupper</a></strong> : renvoie une chaîne en majuscules</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.strtr.php" target="_blank">strtr</a></strong> : remplace des caractères dans une chaîne</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.substr.php" target="_blank">substr</a></strong> : retourne un segment de chaîne</li>
            <li><strong><a href="https://www.php.net/manual/fr/function.trim.php" target="_blank">trim</a></strong> : supprime les espaces (ou d'autres caractères) en début et fin de chaîne</li>
            <li><a href="https://www.php.net/manual/fr/ref.strings.php" target="_blank">... et bien d'autres</a></li>
        </ul>
    </section>

    <hr>

    <section class="mt-5">
        <h2 class="text-muted">Exercices</h2>

        <ul>
            <li>Faites en sorte que la variable <kbd>$nom = 'arthur';</kbd> soit écrite en majuscule.</li>
            <li>Trouvez la position du nom d'Arthu dans la chaine <kbd>$presentation = 'Je suis Arthur Pendragon !';</kbd>.</li>
            <li>En reprennant ce tableau de personnage <kbd>$personnages = ['Arthur', 'Lancelot', 'Perceval', 'Guenièvre', 'Merlin', 'Mordred'];</kbd>, trouvez celui qui a le nom le plus long.</li>
            <li>Créer une fonction pour que tous les noms de peronnage soient écrits en minuscule avec la première lettre en majuscule.</li>
            <li>Compléter la fonction <kbd>attaquer()</kbd> créée dans le chapitre précédent en y ajoutant la phrase : "{{ Nom }} ! En garde, ma biquette ! Je vais vous découper le gras du cul, ça vous fera ça de moins à trimbaler !" où le nom est formaté comme au point précédent</li>
        </ul>
        
        <p class="mt-3">
            <a class="btn btn-primary" data-toggle="collapse" href="#correction" role="button" aria-expanded="false" aria-controls="correction">
                Correction
            </a>
        </p>
        
        <div class="collapse" id="correction">
            <div class="card card-body">
                <pre class="line-numbers"><code class="language-php">&lt;?php
/* Correction 1 */
$nom = 'arthur';
echo ucfirst($nom);// Arthur

/* Correction 2 */
$presentation = 'Je suis Arthur Pendragon !';
echo strpos($presentation, 'Arthur'); // 8

/* Correction 3 */
$personnages = ['Arthur', 'Lancelot', 'Perceval', 'Guenièvre', 'Merlin', 'Mordred'];
$nomPlusLong = '';

foreach($personnages  as $personnage) {
    if (strlen($personnage) > strlen($nomPlusLong)) {
        $nomPlusLong = $personnage;
    }
}

    // Equivaut à
foreach($personnages  as $personnage) {
    $nomPlusLong = strlen($personnage) > strlen($nomPlusLong) ? $personnage : $nomPlusLong;
}
    // Attention l'opérateur Elvis ne peut pas fonctionner ici " L'expression expr1 ?: expr3 retourne expr1 si expr1 vaut true, et expr3 sinon."

echo $nomPlusLong;

/* Correction 4 */
function formaterNom(string $nom): string
{
    return ucfirst(strtolower($nom));
}

echo formaterNom('ARTHUR'); // Arthur

/* Correction 5 */
$perceval = [
    'nom'        => 'Perceval',
    'profession' => 'Chevalier',
    'pv'         => 300,
    'atk'        => 40
];
$mordred = [
    'nom'        => 'Mordred',
    'profession' => 'Chevalier',
    'pv'         => 400,
    'atk'        => 40
];

function attaquer(array $attaquant, array &$cible): int
{
    echo formaterNom($cible['nom']) . ' ! En garde, ma biquette ! Je vais vous découper le gras du cul, ça vous fera ça de moins à trimbaler !';

    return $cible['pv'] -= $attaquant['atk'];
}

attaquer($perceval, $mordred);
var_dump($mordred);
                </code></pre>
            </div>
        </div>
    </section>

    <div class="row mt-5 mb-5">
        <a href="1_fonctions_personnelles.html" class="btn btn-outline-secondary col-auto mr-auto">Précédent</a>
        <a href="3_fonctions_tableaux.html" class="btn btn-outline-primary col-auto">Suivant</a>
    </div>
</main>

<script src="../../scripts/prism.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
        crossorigin="anonymous"></script>
</body>
</html>